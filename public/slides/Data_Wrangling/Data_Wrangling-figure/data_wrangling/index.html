<!DOCTYPE html>
<html lang="en-us">
<head>
  
  

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.6.3">

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/slides/data_wrangling/data_wrangling-figure/data_wrangling/">

  <title> | Academic</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/css/reveal.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/css/theme/black.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous">

  
  
  
  <link rel="stylesheet" href="/css/reveal_custom.min.css">

  
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/reveal.js\/3.8.0/css/print/pdf.css' : 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/reveal.js\/3.8.0/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>

</head>
<body>

  
<div class="reveal">
  <div class="slides">
    
    
    

    
    
    
    
    

    
    

    
    
    
    <section>
    
      <h1 id="data-wrangling">Data Wrangling</h1>
<p>author: Cory Whitney
font-family: &lsquo;Helvetica&rsquo;
date: &ldquo;2019-03-10&rdquo;
autosize: true</p>
<p>&lt;img src=&quot;Teaching-R-figure/wrangler.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;70%&quot;; width=&quot;70%&quot;;&ldquo;&gt;</p>
<div class="footer">University of Bonn </div>
<h1 id="overview">Overview</h1>
<p>incremental: true
right: 70%
&lt;img src=&quot;Teaching-R-figure/tidyR.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;30%&quot;; width=&quot;30%&quot;;&ldquo;&gt;</p>
<p>&lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;50%&quot;; width=&quot;50%&quot;;&ldquo;&gt;</p>

    </section>
    

    
    
    
    <section>
    
      
<ul>
<li>Notes on R</li>
<li>Tidy code style using tidyR</li>
<li>Clean and intuitive functions using dplyr</li>
<li>Concise code using magrittr &lsquo;Ceci n'est pas une pipe&rsquo;</li>
</ul>
<h1 id="notes-on-r">&lt;img src=&quot;Teaching-R-figure/magrittr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;30%&quot;; width=&quot;30%&quot;;&ldquo;&gt;
Notes on R</h1>
<p>incremental: true</p>
<p>&ldquo;[&hellip;] writing R code is a hedonistically artistic, left-brained, paint-in-your-hair sort of experience [&hellip;] learn how to code the same way we learned how to catch salamanders as children – trial and error, flipping over rocks till we get a reward [&hellip;] once the ecstasy of creation has swept over us, we awake late the next morning to find our canvas covered with 2100 lines of R code [&hellip;] Heads throbbing with a statistical absinthe hangover, we trudge through it slowly over days, trying to figure out what we did.&rdquo;</p>
<p>&lt;img src=&quot;Teaching-R-figure/andrew_macdonald.png&rdquo; style=&quot;background:none; border:none; box-shadow:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt;Andrew MacDonald @polesasunder thestudyofthehousehold.com</p>
<h1 id="notes-on-r-1">Notes on R</h1>
<p>&lt;img src=&quot;Teaching-R-figure/concentrate.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;40%&quot;; width=&quot;40%&quot;;&ldquo;&gt;</p>
<h1 id="notes-on-r-2">Notes on R</h1>
<p>incremental: true
<small>Keep it tidy</small> &lt;img src=&quot;Teaching-R-figure/tidyR.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt; <small><a href="http://style.tidyverse.org/">http://style.tidyverse.org/</a></small></p>
<p>Use ‘#’ to annotate and not run</p>
<p>If not Rmarkdown then at least use ‘&mdash;-’ or ‘####’</p>
<p>#Section 1&mdash;-</p>
<p>#Section 2####</p>
<p>#Section 3####</p>
<p><span style="font-weight:bold; color:red;">TOC in upper right console</span></p>
<h1 id="notes-on-r-3">Notes on R</h1>
<p>incremental: true
left: 70%
<small>Keep it tidy</small> &lt;img src=&quot;Teaching-R-figure/tidyR.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt; <small><a href="http://style.tidyverse.org/">http://style.tidyverse.org/</a></small></p>
<pre><code class="language-r">browseVignettes(package = &quot;tidyverse&quot;)
</code></pre>
<p>The tidy tools manifesto</p>

    </section>
    

    
    
    
    <section>
    
      
<p>&lt;img src=&quot;Teaching-R-figure/hadley_wickham.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;40%&quot;; width=&quot;40%&quot;;&ldquo;&gt;<br>
Hadley Wickham</p>
<h1 id="notes-on-r-4">Notes on R</h1>
<p>incremental: true
<small>Keep it tidy</small> &lt;img src=&quot;Teaching-R-figure/tidyR.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt; <small><a href="http://style.tidyverse.org/">http://style.tidyverse.org/</a></small></p>
<p>&lt;img src=&quot;Teaching-R-figure/tidyR_process.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;100%&quot;; width=&quot;100%&quot;;&ldquo;&gt;</p>
<p>Good coding style is like correct punctuation:
withoutitthingsarehardtoread</p>
<h1 id="notes-on-r-5">Notes on R</h1>
<p>incremental: true
<small>Keep it tidy</small> &lt;img src=&quot;Teaching-R-figure/tidyR.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt; <small><a href="http://style.tidyverse.org/">http://style.tidyverse.org/</a></small></p>
<ul>
<li>Keep your data tidy</li>
<li>When your data is tidy, each column is a variable, and each row is an observation</li>
<li>Consistent structure lets you focus your struggle on questions about the data, not fighting to get the data into the right form for different functions</li>
</ul>
<p>&lt;img src=&quot;Teaching-R-figure/wrangler.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;20%&quot;; width=&quot;20%&quot;;&ldquo;&gt;</p>
<h1 id="notes-on-r-6">Notes on R</h1>
<p>incremental: true</p>
<p>&lsquo;Tidy Data&rsquo; in the Journal of Statistical Software <a href="http://www.jstatsoft.org/v59/i10/paper">http://www.jstatsoft.org/v59/i10/paper</a>.</p>
<p>Three things make a dataset tidy:</p>
<ul>
<li>Each variable with its own column.</li>
<li>Each observation with its own row.</li>
<li>Each value with its own cell.</li>
</ul>
<p>&lt;img src=&quot;Teaching-R-figure/tidydata.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;90%&quot;; width=&quot;90%&quot;;&ldquo;&gt;</p>
<h1 id="wrangling">Wrangling</h1>
<p>incremental: true</p>
<ul>
<li>Once you have <strong>tidy</strong> data, a common first step is to <strong>transform</strong> it</li>
<li>narrowing in on observations of interest</li>
<li>creating new variables that are functions of existing variables</li>
<li>calculating a set of summary statistics</li>
</ul>
<p>&lt;img src=&quot;Teaching-R-figure/Wrangling_Data.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;50%&quot;; width=&quot;50%&quot;;&ldquo;&gt; <small><a href="http://www.codeastar.com/data-wrangling/">http://www.codeastar.com/data-wrangling/</a></small></p>
<h1 id="wrangling-1">Wrangling</h1>
<p>incremental: true
<small>Format of __dplyr__</small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt;</p>
<p>&lt;img src=&quot;Teaching-R-figure/hadley_wickham.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;50%&quot;; width=&quot;50%&quot;;&ldquo;&gt;</p>
<p><small><a href="http://style.tidyverse.org/">http://style.tidyverse.org/</a></small></p>

    </section>
    

    
    
    
    <section>
    
      
<ul>
<li><strong>Arguments start with a data frame</strong></li>
<li><strong>select</strong>: return a subset of the columns</li>
<li><strong>filter</strong>: extract a subset of rows</li>
<li><strong>arrange</strong>: reorder rows</li>
<li><strong>rename</strong>: rename variables</li>
<li><strong>mutate</strong>: add new variables and columns or transform</li>
<li><strong>summarize</strong>: generate tables of summary statistics</li>
</ul>
<h1 id="wrangling-2">Wrangling</h1>
<p>incremental: true
left: 70%
<small>Using __dplyr__</small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt;</p>
<pre><code class="language-r">library(dplyr)
</code></pre>
<p>&lt;img src=&quot;Teaching-R-figure/github.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;40%&quot;; width=&quot;40%&quot;;&ldquo;&gt; <small>genomicsclass.github.io/book/pages/dplyr_tutorial</small></p>

    </section>
    

    
    
    
    <section>
    
      
<p>&lt;img src=&quot;Teaching-R-figure/Roger_Peng.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;40%&quot;; width=&quot;40%&quot;;&ldquo;&gt;
<small>Roger Peng</small></p>
<h1 id="wrangling-3">Wrangling</h1>
<p>incremental: true
<small>Subsetting</small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt;</p>
<p><strong>Select</strong></p>
<pre><code class="language-r">aca_work_filter&lt;-select(participants_data, academic_parents, working_hours_per_day)
</code></pre>
<pre><code class="language-r">non_aca_work_filter&lt;-select(participants_data, -academic_parents, -working_hours_per_day)
</code></pre>
<h1 id="wrangling-4">Wrangling</h1>
<p>incremental: true
<small>Subsetting</small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt;</p>
<p><strong>Filter</strong></p>
<pre><code class="language-r">work_filter&lt;-filter(participants_data, working_hours_per_day &gt;10)
</code></pre>
<pre><code class="language-r">work_name_filter&lt;-filter(participants_data, working_hours_per_day &gt;10 &amp; letters_in_first_name &gt;6)
</code></pre>
<h1 id="wrangling-5">Wrangling</h1>
<p>incremental: true
<small> <strong>Rename</strong> </small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt;</p>
<pre><code class="language-r">participants_data &lt;- rename(participants_data, name_length = letters_in_first_name)
</code></pre>
<pre><code class="language-r">participants_data &lt;- rename(participants_data,
daily_labor = working_hours_per_day)
# names(participants_data)
</code></pre>
<h1 id="wrangling-6">Wrangling</h1>
<p>incremental: true
<small> <strong>Mutate</strong> </small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt;</p>
<pre><code class="language-r">participants_data &lt;- mutate(participants_data, daily_labor*mean(daily_labor, na.rm=T))
# head(participants_data)
</code></pre>
<pre><code class="language-r">participants_data &lt;- mutate(participants_data, number_of_siblings -mean(number_of_siblings))
# head(participants_data)
</code></pre>
<h1 id="wrangling-7">Wrangling</h1>
<p>incremental: true
<small> <strong>Group by</strong> </small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt; create a commute category</p>
<pre><code class="language-r">participants_data &lt;- mutate(participants_data, commute = factor(1* (km_home_to_zef &gt; 10), labels = c(&quot;commuter&quot;, &quot;local&quot;)))
</code></pre>
<pre><code class="language-r">commuter_data &lt;- group_by(participants_data, commute)
</code></pre>
<h1 id="wrangling-8">Wrangling</h1>
<p>incremental: true
<small> <strong>Summarize</strong> </small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt; <small>get a summary of travel times and days to response</small></p>
<pre><code class="language-r">commuter_summary &lt;- summarize(commuter_data, mean(days_to_email_response), median(name_length))
</code></pre>
<ul>
<li>Make your own query</li>
</ul>
<p></small> &lt;img src=&quot;Teaching-R-figure/dplyr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;20%&quot;; width=&quot;20%&quot;;&ldquo;&gt;</p>
<h1 id="wrangling-9">Wrangling</h1>
<p>incremental: true
<small> <strong>Pipeline %&gt;%</strong> </small> &lt;img src=&quot;Teaching-R-figure/magrittr.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;10%&quot;; width=&quot;10%&quot;;&ldquo;&gt;</p>
<ul>
<li>Do all the previous with a pipeline %&gt;%</li>
</ul>
<pre><code class="language-r">pipe_data &lt;- participants_data %&gt;% 
  mutate(commute = factor(1* (km_home_to_zef &gt; 10), 
                          labels = c(&quot;commuter&quot;, &quot;local&quot;))) %&gt;% 
  group_by(commute) %&gt;% 
  summarize(mean(days_to_email_response), median(name_length), 
            max(years_of_study)) %&gt;% 
  as.data.frame
</code></pre>
<h1 id="next-time-we-talk-about-vizualiation">Next time we talk about vizualiation</h1>
<p>incremental: true
left: 30%
&lt;img src=&quot;Teaching-R-figure/yihui.png&rdquo; style=&quot;background:none; border:none; box-shadow:none;height=&quot;50%&quot;; width=&quot;50%&quot;;&ldquo;&gt; <a href="https://yihui.name/en/2017/08/so-gh-email/">https://yihui.name/en/2017/08/so-gh-email/</a></p>

    </section>
    

    
    
    
    <section>
    
      
<p><img src="Teaching-R-figure/unnamed-chunk-15-1.gif" alt="plot of chunk unnamed-chunk-15"></p>
<h1 id="next-time-we-talk-about-markdown">Next time we talk about Markdown</h1>
<p><a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf</a></p>

    </section>
    

    
    
  </div>
</div>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/js/reveal.min.js"></script>

  <script>
    window.revealPlugins = { dependencies: [
      
      { src: 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/reveal.js\/3.8.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/reveal.js\/3.8.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      
      { src: 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/reveal.js\/3.8.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      
      { src: 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/reveal.js\/3.8.0/plugin/zoom-js/zoom.js', async: true },
      
      { src: 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/reveal.js\/3.8.0/plugin/math/math.js', async: true },
      
      { src: 'https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/reveal.js\/3.8.0/plugin/print-pdf/print-pdf.js', async: true },
      
      { src: '\/js\/vendor\/reveal.js\/plugin\/notes\/notes.js', async: true }
    ]};

    let revealDefaults = { center: true, controls: true, history: true, progress: true, transition: 'slide', mouseWheel: true };
    let revealOptions = Object.assign({}, revealDefaults, revealPlugins);
    Reveal.initialize(revealOptions);
  </script>

</body>
</html>
